syntax = "proto3";

package tracker;

option go_package = "github.com/dwikikusuma/atlas/pkg/pb/tracker";

service TrackerService {
  rpc UpdateLocation(UpdateLocationRequest) returns (UpdateLocationResponse);
  rpc GetNearbyDrivers(GetNearbyDriverRequest) returns (GetNearbyDriverResponse);
  rpc GetDriverLocation(GetDriverLocationRequest) returns (GetDriverLocationResponse);
}

message GetDriverLocationRequest {
  string driver_id = 1;
}

message GetDriverLocationResponse {
  string driver_id = 1;
  double latitude = 2;
  double longitude = 3;
}

message UpdateLocationRequest {
  string user_id = 1;
  double latitude = 2;
  double longitude = 3;
  string timestamp = 4;
}

message UpdateLocationResponse {
  bool success = 1;
}

message GetNearbyDriverRequest {
  double latitude = 1;
  double longitude = 2;
  double radius = 3; // in kilometers
}

message Driver{
  string driver_id = 1;
  double latitude = 2;
  double longitude = 3;
  double distance = 4; // distance from the requested location
}

message GetNearbyDriverResponse {
  repeated Driver drivers = 1;
}